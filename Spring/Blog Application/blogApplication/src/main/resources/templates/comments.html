<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-0evHe/X+R7YkIZDRvuzKMRqM+OrBnVFBL6DOitfPri4tjfHxaWutUpFmBp4vmVor" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.9.1/font/bootstrap-icons.css">
    <link rel="stylesheet" th:href="@{/css/style.css}">
    <meta charset="UTF-8">
    <title th:text="#{lt.codeacademy.blogApplication.comment.pageTitle}"></title>
</head>
<body>

<div class="container">
    <div class="w-15">
        <select id="language-switcher"
                class="form-select"
                aria-label="Default select example">
            <option value="" selected th:text="#{lt.codeacademy.blogApplication.language.switcher.select}"></option>
            <option value="EN" th:text="#{lt.codeacademy.blogApplication.language.switcher.en}"></option>
            <option value="LT" th:text="#{lt.codeacademy.blogApplication.language.switcher.lt}"></option>
            <option value="DE" th:text="#{lt.codeacademy.blogApplication.language.switcher.de}"></option>
            <option value="FR" th:text="#{lt.codeacademy.blogApplication.language.switcher.fr}"></option>
        </select>
    </div>
    <div th:if="${not commentsByPage.hasContent()}"
         class="alert alert-info"
         role="alert"
         th:text="#{lt.codeacademy.blogApplication.comments.message.empty.comments}">

    </div>
    <div th:if="${commentsByPage.hasContent()}">
        <table class="table table-striped table-hover">
            <thead class="table-dark">
            <tr>
                <th class="col-2">
                    <a th:with="direction=${commentsByPage.sort.getOrderFor('text')?.direction}"
                       th:href="@{/comments(sort='text,' + ${direction?.name() eq 'ASC' ? 'DESC' : 'ASC'} + ',ignorecase')}">
                        <span th:text="#{lt.codeacademy.blogApplication.comments.text}"></span>
                        <i class="bi"
                           th:classappend="${direction?.name() eq 'ASC' ? 'bi-sort-down-alt' : 'bi-sort-down'}"
                           th:if="${direction ne null}"></i>
                    </a>
                </th>



                <th></th>
            </tr>
            </thead>
            <tbody>
            <tr th:each="comment : ${commentsByPage.content}">
                <td>
                    <a th:href="@{/comments/{id}(id=${comment.id})}" th:text="${comment.text}"></a>
                </td>
                <td th:text="${comment.text}"></td>
                <td>

                </td>
            </tr>
            </tbody>
        </table>
        <div class="row">
            <div class="col-2"></div>
            <div class="col-8">
                <nav aria-label="Page navigation example">
                    <ul class="pagination justify-content-center"

                        th:with="pageSort=${commentsByPage.sort.toList().get(0)},
							sort=${pageSort.property + ','+ pageSort.direction + ',ignorecase'}">

                        <li class="page-item"
                            th:classappend="${commentsByPage.number eq 0 ? 'disabled' : ''}">
                            <a class="page-link"
                               th:href="@{/comments(page=${commentsByPage.number} - 1, sort=${sort})}"
                               th:text="#{lt.codeacademy.blogApplication.articles.paginator.previous}"></a>
                        </li>
                        <li class="page-item"
                            th:each="commentPage: ${#numbers.sequence(0, commentsByPage.totalPages - 1)}"
                            th:classappend="${commentPage eq commentsByPage.number ? 'active': ''}">
                            <a class="page-link"
                               th:href="@{/comments(page=${commentPage},sort=${sort})}"
                               th:text="${commentPage} + 1"></a>
                        </li>
                        <li class="page-item"
                            th:classappend="${commentsByPage.number eq commentsByPage.totalPages - 1 ? 'disabled' : ''}">
                            <a class="page-link"
                               th:href="@{/comments(page=${commentsByPage.number} + 1, sort=${sort})}"
                               th:text="#{lt.codeacademy.blogApplication.articles.paginator.next}"></a>
                        </li>
                    </ul>
                </nav>
            </div>

        </div>
    </div>
    <div th:text="'date: ' + ${myDate}"></div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/js/bootstrap.bundle.min.js" integrity="sha384-pprn3073KE6tl6bjs2QrFaJGz5/SUsLqktiwsUTF55Jfv3qYSDhgCecCxMW52nD2" crossorigin="anonymous"></script>
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script th:src="@{/js/language-switcher.js}"></script>
</body>
</html>